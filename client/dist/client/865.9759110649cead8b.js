"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[865],{4865:(I,u,a)=>{a.r(u),a.d(u,{AdminModule:()=>Z});var d=a(5180),e=a(5678),h=a(9110),m=a(9862),f=a(553),b=a(7398);let p=(()=>{class n{constructor(t){this.http=t,this.baseUrl=f.N.apiUrl,this.paginatedResult=new h.B}getUsersWithRoles(t,i){const o=(new m.LE).set("pageNumber",t.toString()).set("pageSize",i.toString());return this.http.get(this.baseUrl+"admin/users",{observe:"response",params:o}).pipe((0,b.U)(r=>(this.paginatedResult.result=r.body?.users,r.headers.get("Pagination")&&(this.paginatedResult.pagination=JSON.parse(r.headers.get("Pagination"))),this.paginatedResult)))}editRoles(t){return this.http.put(this.baseUrl+"admin/edit-roles/"+t,{})}deleteUser(t){return this.http.delete(this.baseUrl+"admin/delete-user/"+t)}static#e=this.\u0275fac=function(i){return new(i||n)(e.LFG(m.eN))};static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var g=a(6814),l=a(6472),v=a(8588);function y(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.editRole(o.user.appUserId))}),e._uU(1," Moderator "),e.qZA()}}function C(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.editRole(o.user.appUserId))}),e._uU(1," Member "),e.qZA()}}function _(n,s){if(1&n&&(e.TgZ(0,"div",1)(1,"a",2),e._UZ(2,"app-user-avatar",3),e.TgZ(3,"h2",4),e._uU(4),e.qZA()(),e.YNc(5,y,2,0,"button",5)(6,C,2,0,"button",6),e.TgZ(7,"button",7),e._uU(8,"Delete"),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.MGl("routerLink","/user/",t.user.username,""),e.xp6(1),e.Q6J("profilePictureUrl",t.user.profilePictureUrl)("fullName",t.user.fullName)("gender",t.user.gender),e.xp6(2),e.Oqu(t.user.fullName),e.xp6(1),e.Q6J("ngIf",t.user.isModerator),e.xp6(1),e.Q6J("ngIf",!t.user.isModerator)}}let U=(()=>{class n{constructor(t){this.adminService=t}ngOnInit(){}editRole(t){this.adminService.editRoles(t).subscribe({next:()=>{this.user.isModerator=!this.user.isModerator},error:i=>console.error(i)})}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(p))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-user-display"]],inputs:{user:"user"},decls:1,vars:1,consts:[["class","admin-user-display-container theme-border-bottom",4,"ngIf"],[1,"admin-user-display-container","theme-border-bottom"],[1,"username-and-avatar",3,"routerLink"],[1,"admin-user-avatar",3,"profilePictureUrl","fullName","gender"],[1,"admin-user-fullname"],["class","role-edit primary parameters theme-border header-text box-shadow",3,"click",4,"ngIf"],["class","role-edit reverse-parameters",3,"click",4,"ngIf"],[1,"delete-user-button","rounded-border"],[1,"role-edit","primary","parameters","theme-border","header-text","box-shadow",3,"click"],[1,"role-edit","reverse-parameters",3,"click"]],template:function(i,o){1&i&&e.YNc(0,_,9,7,"div",0),2&i&&e.Q6J("ngIf",o.user)},dependencies:[d.rH,g.O5,v.k],styles:[".admin-user-display-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;padding:1em 0}.username-and-avatar[_ngcontent-%COMP%]{display:flex;align-items:center;width:30%;gap:2em}.admin-user-avatar[_ngcontent-%COMP%]{height:5.2em;width:5.2em}.admin-user-fullname[_ngcontent-%COMP%]{font-size:1.8em}.role-edit[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:.2em 0;font-size:2em;width:8em;border-radius:.2em;cursor:pointer}.delete-user-button[_ngcontent-%COMP%]{cursor:pointer;font-family:Roboto Regular;display:flex;justify-content:center;align-items:center;padding:.5em 0;font-size:2em;width:5em;background-color:#ff0000a6;color:#fff;border-radius:.15em;transition:opacity .2s ease-in-out}.delete-user-button[_ngcontent-%COMP%]:hover{opacity:.8}"]})}return n})();function x(n,s){if(1&n&&(e.TgZ(0,"div",7),e._UZ(1,"app-admin-user-display",8),e.qZA()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("user",t)}}const A=(n,s,t)=>({itemsPerPage:n,currentPage:s,totalItems:t}),N=[{path:"",component:(()=>{class n{constructor(t){this.adminService=t,this.users=[],this.pageNumber=1,this.pageSize=6}ngOnInit(){this.loadUsers()}loadUsers(){this.adminService.getUsersWithRoles(this.pageNumber,this.pageSize).subscribe({next:t=>{const i=t.result;i&&(this.users.push(...i),this.totalUsers=t.pagination?.totalItems,this.pagination=t.pagination,console.log(this.users))},error:t=>console.error(t)})}pageChanged(t){this.pageNumber=t,this.loadUsers()}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(p))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin"]],decls:11,vars:9,consts:[["id","admin-tab"],["id","admin-panel-content-container",1,"secondary-background","rounded-border","border-shadow"],["id","admin-tab-header",1,"header-text"],["id","user-count"],["class","admin-users",4,"ngFor","ngForOf"],["id","paginator"],["previousLabel","<","nextLabel",">","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",1,"pagination-controls","logo-text-theme",3,"pageChange","pageBoundsCorrection"],[1,"admin-users"],[3,"user"]],template:function(i,o){if(1&i&&(e.TgZ(0,"section",0)(1,"div",1)(2,"h1",2),e._uU(3,"Administrator Panel"),e.qZA(),e.TgZ(4,"h2",3),e._uU(5),e.qZA(),e.YNc(6,x,2,1,"div",4),e.ALo(7,"paginate"),e.TgZ(8,"div",5)(9,"pagination-controls",6),e.NdJ("pageChange",function(c){return o.pageChanged(c)})("pageBoundsCorrection",function(c){return o.pageChanged(c)}),e._uU(10," >"),e.qZA()()()()),2&i){let r;e.xp6(5),e.hij(" Total Website Users: ",null!==(r=null==o.pagination?null:o.pagination.totalItems)&&void 0!==r?r:0," "),e.xp6(1),e.Q6J("ngForOf",e.xi3(7,2,o.users,e.kEZ(5,A,o.pageSize,o.pageNumber,null==o.pagination?null:o.pagination.totalItems)))}},dependencies:[g.sg,l.LS,U,l._s],styles:["#admin-tab[_ngcontent-%COMP%]{width:100vw;display:flex;justify-content:center;font-family:Roboto Regular}#admin-panel-content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:1em;margin-top:2em;width:92em}#admin-tab-header[_ngcontent-%COMP%]{font-size:4.2em;padding:.5em 0}#user-count[_ngcontent-%COMP%]{font-size:2.8em;padding-bottom:1.5em;opacity:.9}.admin-users[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;margin-bottom:1em}#paginator[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-family:Nexa Bold;font-weight:900;font-size:3.3em;margin:.7em 0 .5em}.pagination-controls[_ngcontent-%COMP%]     .ngx-pagination .current{background-color:#f5f5f5;color:#18191a;border:.1em solid #18191a;border-radius:.2em}.pagination-controls[_ngcontent-%COMP%]     .ngx-pagination a{color:#18191a;border-radius:.1em;-webkit-text-stroke:.015em #cacaca}.pagination-controls[_ngcontent-%COMP%]     .ngx-pagination a:hover{background-color:#cacaca58}.pagination-controls[_ngcontent-%COMP%]     .pagination-previous a:hover, .pagination-controls[_ngcontent-%COMP%]     .pagination-next a:hover{background-color:transparent}"]})}return n})(),canActivate:[()=>{const n=(0,e.f3M)(d.F0);return!!(()=>{const n=localStorage.getItem("roles");return(n?JSON.parse(n):[]).includes("Admin")})()||n.parseUrl("/home")}]}];let R=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[d.Bz.forChild(N),d.Bz]})}return n})();var T=a(6208);let Z=(()=>{class n{constructor(){console.log("Admin Module Loaded")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[R,T.m,l.JX]})}return n})()}}]);